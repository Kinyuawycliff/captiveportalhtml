<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Zoomo Net Solutions</title>
    <style>
        /* General body styling */
        body {
            font-family: sans-serif;
            background-image: url('./landscape.jpg');
            -webkit-backdrop-filter: blur(20px);
            backdrop-filter: blur(20px);
            background-size: cover;
            background-repeat: no-repeat;
            background-position: center;
            background-color: #f9f9f9; /* Tailwind's bg-gray-100 */
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0;
            height: 100%;
            z-index: -1;
        }

        /* Main container styling */
        .container {
            width: 100%;
            height: 100vh;
            padding: 14px; 
            background-color: rgba(255, 255, 255, 0.696);      
        }

        /* Title styling */
        .main-title {
            font-size: 16px; 
            font-weight: bold;
            text-align: center;
            margin-bottom: 16px; /* Tailwind's mb-4 */
            color: #1f2937; /* Tailwind's text-gray-800 (approximation) */
        }

        .help {
            text-align: center;
        }
        .help-span {
            font-weight: bold;
            text-decoration: underline;
        }

        /* Purchase instructions box */
.purchase-info {
    background-color: rgba(255, 255, 255, 0.546);
    -webkit-backdrop-filter: blur(40px);
    backdrop-filter: blur(40px);
    padding: 20px;
    border-radius: 8px;
    margin-bottom: 14px;
    margin-right: 14px;
    margin-left: 14px;
}


.purchase-info-heading {
    color: #000000;
    font-weight: 600;
    margin-bottom: 8px;
}

.purchase-steps {
    list-style-type: decimal;
    padding-left: 20px;
    font-size: 10px;
    color: #fdfdfd;
    line-height: 1.5;
    margin-bottom: 0;
}

.purchase-steps li {
    font-weight: lighter;
    margin-bottom: 2px;
    color: #b2b0b0;
}

.purchase-steps li::marker {
    color: #f97316; /* Orange number */
    font-weight: 600;
}


        /* Login button */
        .login-button {
            background-color: #f97316;
            border: none;
            color: #fff;
            width: 90px;
            padding: 4px;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.15s ease-in-out;
            font-size: 1rem;
        }

        .login-button:hover {
            background-color: #ea580c; /* Tailwind's hover:bg-orange-600 */
        }
        .sub {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 6px;
        }

        /* Tab navigation container */
.tab-navigation {
    display: flex;
    justify-content: center;
    margin: 0 auto 8px auto; /* Center horizontally + bottom spacing */
    background-color: #d3d5d8;
    padding: 2px;
    width: fit-content;
    border-radius: 6px;
}

/* Tab buttons */
.tab-button {
    padding: 8px 10px;
    border-radius: 2px;
    font-weight: 600;
    border: 2px solid transparent; /* ensure a visible border */
    cursor: pointer;
    font-size: 0.875rem;
    background-color: #e5e7eb;
    color: #4b5563;
}

/* Active tab styles */
.tab-button.active {
    border-color: #ea580c;  /* Orange border */
    color: #ea580c;
    background-color: #fbfbfb;
}


        .tab-button.inactive {
            background-color: #e5e7eb; 
            color: #4b5563; 
        }

        /* Packages grid */
.packages-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 12px;
    margin-top: 16px;
    justify-content: center; 
}


        /* Package item */
        .package-item {
            background-color: #fff; /* Tailwind's bg-white */
            padding: 12px; /* Tailwind's p-3 */
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06); /* Tailwind's shadow */
            border-radius: 8px; /* Tailwind's rounded-lg */
            text-align: center;
            font-size: 0.875rem; /* Tailwind's text-sm */
            font-weight: 600; /* Tailwind's font-semibold */
            cursor: pointer;
            transition: background-color 0.15s ease-in-out;
        }

        .package-item:hover {
            background-color: #fffdfb; /* Tailwind's hover:bg-orange-100 */
        }

        .package-item .price {
            color: #000000; /* Tailwind's text-orange-500 */
        }

        .package-item .duration {
            color: #6b7280; /* Tailwind's text-gray-500 */
            font-size: 0.75rem; /* Tailwind's text-xs */
            font-weight: 400;
        }

        /* Modal overlay */
    .modal {
    position: fixed;
    inset: 0;
    background-color: rgba(92, 92, 92, 0.5); 
    -webkit-backdrop-filter: blur(5px); 
    backdrop-filter: blur(5px); 
    display: none; 
    align-items: center;
    justify-content: center;
    padding: 16px;
    overflow: auto;
}

        .modal.show {
            display: flex;
        }

        /* Modal content */
        .modal-content {
            background-color: #fff; /* Tailwind's bg-white */
            padding: 24px; /* Tailwind's p-6 */
            border-radius: 8px; /* Tailwind's rounded-lg */
            width: 90%;
            max-width: 320px; /* Approximation of Tailwind's max-w-xs */
            margin-left: auto;
            margin-right: auto;
            position: relative;
            max-height: 50%;
        }

        @media (min-width: 640px) {
            .modal-content {
                max-width: 512px; /* Tailwind's md:max-w-md */
            }
        }

        /* Close button */
        .modal-close-button {
            position: absolute;
            top: 8px; /* Approximation of Tailwind's top-2 */
            right: 16px; /* Approximation of Tailwind's right-4 */
            cursor: pointer;
            font-size: 1.5rem; /* Approximation of Tailwind's text-2xl */
            line-height: 1;
            color: #4a5568; /* Tailwind's text-gray-600 (for confirmation modal) */
        }

        .payment-modal-content .modal-close-button {
            color: #1a202c; /* Tailwind's text-gray-900 (approximation) */
        }

        /* Modal heading */
        .modal-heading {
            font-size: 1.25rem; /* Equivalent to Tailwind's text-xl */
            font-weight: bold;
            margin-bottom: 10px; /* Tailwind's mb-4 */
            text-align: center;
            color: #1f2937; /* Tailwind's text-gray-800 (approximation) */
        }

        /* Form input */
        .form-input {
            width: 90%;
            padding: 8px;
            border: 1px solid #d2d6dc; /* Tailwind's border-gray-300 (approximation) */
            border-radius: 8px; /* Tailwind's rounded */
            margin-bottom: 8px; /* Tailwind's mb-4 */
            font-size: 1rem; /* Tailwind's text-lg */
            transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
        }

        .form-input:focus {
            outline: none;
            border-color: #f97316; /* Tailwind's focus:border-orange-500 */
            box-shadow: 0 0 0 2px rgba(251, 146, 60, 0.5); /* Tailwind's focus:ring-2 focus:ring-orange-500 */
        }

        /* Subscribe button */
        .subscribe-button {
            background-color: #f97316; 
            color: #fff; 
            width: 100%;
            font-weight: bold;
            padding: 12px; 
            border-radius: 8px; 
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 8px; 
            cursor: pointer;
            transition: background-color 0.15s ease-in-out;
            border: none;
            gap: 6px; 
        }

        .subscribe-button:hover {
            background-color: #ea580c; /* Tailwind's hover:bg-orange-600 */
        }

        /* Spinner */
        .spinner {
            width: 18px; /* Tailwind's h-6 */
            height: 18px; /* Tailwind's w-6 */
            animation: spin 1s linear infinite;
            border: 2px solid currentColor;
            border-top-color: transparent;
            border-radius: 50%;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        .spinner.hidden {
            display: none;
        }


.modal-content {
    background-color: #fcfcfc;
    border-radius: 12px;
    width: 100%;
    max-width: 400px;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
    padding: 1.5rem;
    position: relative;
    text-align: center;
    animation: fadeIn 0.3s ease-in-out;
}

.modal-close-button {
    position: absolute;
    margin-top: 6px;
    top: 0.75rem;
    right: 1rem;
    font-size: 1.5rem;
    color: #999;
    cursor: pointer;
}

.icon-container {
    display: flex;
    justify-content: center;
    margin-bottom: 1rem;
}

.payment-icon {
    width: 1.95rem;
    height: 1.95rem;
    color: #f97316;
}

.confirmation-heading {
    font-size: 1.125rem;
    font-weight: bold;
    margin-bottom: 0.5rem;
    text-align: start;
}

.confirmation-text {
    font-size: 10px;
    text-align: start;
    color: #4B5563;
    margin-bottom: 1rem;
}

.confirmation-spinner {
    width: 26px;
    height: 26px;
    border: 4px solid #f97316;
    border-top-color: transparent;
    border-radius: 50%;
    animation: spin 1s linear infinite;
    margin: 0 auto 1rem;
}

.retry-note {
    font-size: 8px;
    text-align: start;
    margin-bottom: 8px;
    border-radius: 6px;
    color: #4d4d4f;
}

.retry-button {
    background-color: #f97316;
    color: #fff;
    padding: 8px 16px;
    width: 100%;
    margin-top: 0.75rem;
    border-radius: 6px;
    border: none;
    font-weight: 600;
    cursor: pointer;
    transition: background-color 0.2s ease;
}

.retry-button:hover {
    background-color: #ea580c;
}



@keyframes spin {
    to {
        transform: rotate(360deg);
    }
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: scale(0.96);
    }
    to {
        opacity: 1;
        transform: scale(1);
    }
}



.auth-tabs {
    display: flex;
    justify-content: center;
    align-items: center;
    margin-bottom: 12px;
}

.auth-tab-button {
    padding: 8px 16px;
    width: 140px;
    text-align: center;
    font-weight: bold;
    border: none;
    cursor: pointer;
}

.auth-tab-button.active {
    background-color: #f97316;
    color: #fff;
    border-radius: 2px 0 0 2px;
}

.auth-tab-button.inactive {
    background-color: #e5e7eb;
    color: #4b5563;
    border-radius: 0 2px 2px 0;
}

.login-form {
    display: flex;
    flex-direction: column;
    gap: 10px;
    padding: 10px;
}

.voucher-form {
    display: none;
    flex-direction: column;
    gap: 16px;
    padding: 16px;
}

.voucher-form.show {
    display: flex;
}

    </style>
</head>
<body class="bg-gray-100 min-h-screen flex flex-col items-center font-sans">
    <div class="container">
        <h1 class="main-title">Zoomo Net Solutions</h1>

        <div class="purchase-info">
            <h4 class="purchase-info-heading">How to purchase:</h4>
            <ol class="purchase-steps">
                <li>Tap the package you want to purchase</li>
                <li>Enter your Mobile Money phone number</li>
                <li>Click subscribe</li>
                <li>Enter your Mobile Money PIN in the prompt</li>
                <li>Wait a few seconds to be connected</li>
                <li>If not connected, contact customer care <strong>0751743760</strong></li>
            </ol>
        <h4 class="help">Need help? 
            <span class="help-span">0713433877</span></h2>
        <p class='help'>Already subscribed?</p>
        <div class="sub">
            <button onclick="showLoginModal()" class="login-button">Click to login</button>
        </div>

        </div>



        <div class="tab-navigation">
            <button id="unlimitedTab" onclick="switchTab('hotspot')" class="tab-button active">Unlimited</button>
            <button id="bundlesTab" onclick="switchTab('dataplan')" class="tab-button inactive">Bundles</button>
        </div>

        <div id="packages" class="packages-grid"></div>
    </div>

    <div id="paymentModal" class="modal">
        <div class="modal-content payment-modal-content">
            <span class="modal-close-button" onclick="closeModal('paymentModal')">&times;</span>
            <svg fill="#ff7300" height="32px" width="32px" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 365.892 365.892" xml:space="preserve" stroke="#ff7300"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <g> <circle cx="182.945" cy="286.681" r="41.494"></circle> <path d="M182.946,176.029c-35.658,0-69.337,17.345-90.09,46.398c-5.921,8.288-4.001,19.806,4.286,25.726 c3.249,2.321,6.994,3.438,10.704,3.438c5.754,0,11.423-2.686,15.021-7.724c13.846-19.383,36.305-30.954,60.078-30.954 c23.775,0,46.233,11.571,60.077,30.953c5.919,8.286,17.437,10.209,25.726,4.288c8.288-5.92,10.208-17.438,4.288-25.726 C252.285,193.373,218.606,176.029,182.946,176.029z"></path> <path d="M182.946,106.873c-50.938,0-99.694,21.749-133.77,59.67c-6.807,7.576-6.185,19.236,1.392,26.044 c3.523,3.166,7.929,4.725,12.32,4.725c5.051-0.001,10.082-2.063,13.723-6.116c27.091-30.148,65.849-47.439,106.336-47.439 s79.246,17.291,106.338,47.438c6.808,7.576,18.468,8.198,26.043,1.391c7.576-6.808,8.198-18.468,1.391-26.043 C282.641,128.621,233.883,106.873,182.946,106.873z"></path> <path d="M360.611,112.293c-47.209-48.092-110.305-74.577-177.665-74.577c-67.357,0-130.453,26.485-177.664,74.579 c-7.135,7.269-7.027,18.944,0.241,26.079c3.59,3.524,8.255,5.282,12.918,5.281c4.776,0,9.551-1.845,13.161-5.522 c40.22-40.971,93.968-63.534,151.344-63.534c57.379,0,111.127,22.563,151.343,63.532c7.136,7.269,18.812,7.376,26.08,0.242 C367.637,131.238,367.745,119.562,360.611,112.293z"></path> </g> </g></svg>
            <h2 id="packageTitle" class="modal-heading"></h2>
            <input type="tel" id="phoneInput" placeholder="Enter your phone number" class="form-input" pattern="07[0-9]{8}">
            <button onclick="subscribe()" id="subscribeBtn" class="subscribe-button">
                <svg fill="#ffffff" height="12px" width="12px" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 365.892 365.892" xml:space="preserve" stroke="#ff7300"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <g> <circle cx="182.945" cy="286.681" r="41.494"></circle> <path d="M182.946,176.029c-35.658,0-69.337,17.345-90.09,46.398c-5.921,8.288-4.001,19.806,4.286,25.726 c3.249,2.321,6.994,3.438,10.704,3.438c5.754,0,11.423-2.686,15.021-7.724c13.846-19.383,36.305-30.954,60.078-30.954 c23.775,0,46.233,11.571,60.077,30.953c5.919,8.286,17.437,10.209,25.726,4.288c8.288-5.92,10.208-17.438,4.288-25.726 C252.285,193.373,218.606,176.029,182.946,176.029z"></path> <path d="M182.946,106.873c-50.938,0-99.694,21.749-133.77,59.67c-6.807,7.576-6.185,19.236,1.392,26.044 c3.523,3.166,7.929,4.725,12.32,4.725c5.051-0.001,10.082-2.063,13.723-6.116c27.091-30.148,65.849-47.439,106.336-47.439 s79.246,17.291,106.338,47.438c6.808,7.576,18.468,8.198,26.043,1.391c7.576-6.808,8.198-18.468,1.391-26.043 C282.641,128.621,233.883,106.873,182.946,106.873z"></path> <path d="M360.611,112.293c-47.209-48.092-110.305-74.577-177.665-74.577c-67.357,0-130.453,26.485-177.664,74.579 c-7.135,7.269-7.027,18.944,0.241,26.079c3.59,3.524,8.255,5.282,12.918,5.281c4.776,0,9.551-1.845,13.161-5.522 c40.22-40.971,93.968-63.534,151.344-63.534c57.379,0,111.127,22.563,151.343,63.532c7.136,7.269,18.812,7.376,26.08,0.242 C367.637,131.238,367.745,119.562,360.611,112.293z"></path> </g> </g></svg>
                <span id="subscribeText">Subscribe Now</span>
                <svg id="spinner" class="spinner hidden" viewBox="0 0 20 20"></svg>
            </button>
        </div>
    </div>





<!-- Modal -->
<div id="confirmationModal" class="modal">
    <div class="modal-content">
        <span class="modal-close-button" onclick="closeModal('confirmationModal')">&times;</span>
        <div class="confirmation-content">
            <div class="icon-container">
                <svg xmlns="http://www.w3.org/2000/svg" class="payment-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path d="M2 7h20v10H2z" stroke-width="1.5" />
                    <path d="M2 10h20" stroke-width="1.5" />
                    <path d="M6 13h2" stroke-width="1.5" />
                </svg>
            </div>
            <h3 class="confirmation-heading">Waiting for payment confirmation...</h3>
            <p class="confirmation-text">Confirm payment by entering PIN in mobile money prompt. Do not close this page.</p>
            <div class="flex justify-center mb-4">
                <div class="confirmation-spinner"></div>
            </div>
            <p class="retry-note">If the payment fails, you can retry using the button below</p>
            <button onclick="retryPayment()" class="retry-button">
                <svg width="12px" height="12px" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="#ffffff" stroke="#ffffff">#ffffff&lt;#ffffffg#ffffff #ffffffi#ffffffd#ffffff="#ffffff"#ffffffS#ffffffV#ffffffG#ffffffR#ffffffe#ffffffp#ffffffo#ffffff_#ffffffb#ffffffg#ffffffC#ffffffa#ffffffr#ffffffr#ffffffi#ffffffe#ffffffr#ffffff"#ffffff" #ffffffs#fffffft#ffffffr#ffffffo#ffffffk#ffffffe#ffffff-#ffffffw#ffffffi#ffffffd#fffffft#ffffffh#ffffff="#ffffff"#ffffff0#ffffff"#ffffff"&gt;#ffffff&lt;#ffffff #ffffffg#ffffff=""&gt;#ffffff&lt;#ffffffg#ffffff #ffffffi#ffffffd#ffffff="#ffffff"#ffffffS#ffffffV#ffffffG#ffffffR#ffffffe#ffffffp#ffffffo#ffffff_#fffffft#ffffffr#ffffffa#ffffffc#ffffffe#ffffffr#ffffffC#ffffffa#ffffffr#ffffffr#ffffffi#ffffffe#ffffffr#ffffff"#ffffff" #ffffffs#fffffft#ffffffr#ffffffo#ffffffk#ffffffe#ffffff-#ffffffl#ffffffi#ffffffn#ffffffe#ffffffc#ffffffa#ffffffp#ffffff="#ffffff"#ffffffr#ffffffo#ffffffu#ffffffn#ffffffd#ffffff"#ffffff" #ffffffs#fffffft#ffffffr#ffffffo#ffffffk#ffffffe#ffffff-#ffffffl#ffffffi#ffffffn#ffffffe#ffffffj#ffffffo#ffffffi#ffffffn#ffffff="#ffffff"#ffffffr#ffffffo#ffffffu#ffffffn#ffffffd#ffffff"#ffffff"&gt;#ffffff&lt;#ffffff #ffffffg#ffffff=""&gt;#ffffff&lt;#ffffffg#ffffff #ffffffi#ffffffd#ffffff="#ffffff"#ffffffS#ffffffV#ffffffG#ffffffR#ffffffe#ffffffp#ffffffo#ffffff_#ffffffi#ffffffc#ffffffo#ffffffn#ffffffC#ffffffa#ffffffr#ffffffr#ffffffi#ffffffe#ffffffr#ffffff"#ffffff"&gt;#ffffff #ffffff&lt;#ffffffp#ffffffa#fffffft#ffffffh#ffffff #ffffff#ffffff#ffffffi#ffffffl#ffffffl#ffffff="#ffffff"#ffffff"#ffffff" #ffffffd#ffffff="#ffffff"#ffffffM#ffffff1#ffffff4#ffffff.#ffffff9#ffffff5#ffffff4#ffffff7#ffffff0#ffffff9#ffffff8#ffffff,#ffffff7#ffffff.#ffffff9#ffffff8#ffffff5#ffffff7#ffffff6#ffffff0#ffffff8#ffffff4#ffffff" #ffffffl#ffffff1#ffffff5#ffffff.#ffffff0#ffffff7#ffffff1#ffffff1#ffffff,#ffffff7#ffffff.#ffffff9#ffffff9#ffffff5#ffffff5#ffffff2#ffffff="" #ffffffc#ffffff1#ffffff5#ffffff.#ffffff6#ffffff1#ffffff7#ffffff9#ffffff,#ffffff8#ffffff.#ffffff0#ffffff7#ffffff3#ffffff2#ffffff8#ffffff="" #ffffff1#ffffff5#ffffff.#ffffff9#ffffff9#ffffff8#ffffff1#ffffff,#ffffff8#ffffff.#ffffff5#ffffff7#ffffff9#ffffff5#ffffff7#ffffff="" #ffffff1#ffffff5#ffffff.#ffffff9#ffffff2#ffffff0#ffffff4#ffffff,#ffffff9#ffffff.#ffffff1#ffffff2#ffffff6#ffffff3#ffffff6#ffffff="" #ffffffc#ffffff1#ffffff5#ffffff.#ffffff6#ffffff8#ffffff2#ffffff6#ffffff,#ffffff1#ffffff0#ffffff.#ffffff7#ffffff9#ffffff8#ffffff3#ffffff="" #ffffff1#ffffff4#ffffff.#ffffff9#ffffff2#ffffff1#ffffff8#ffffff,#ffffff1#ffffff2#ffffff.#ffffff3#ffffff5#ffffff2#ffffff2#ffffff="" #ffffff1#ffffff3#ffffff.#ffffff7#ffffff4#ffffff7#ffffff,#ffffff1#ffffff3#ffffff.#ffffff5#ffffff6#ffffff5#ffffff4#ffffff="" #ffffffc#ffffff1#ffffff2#ffffff.#ffffff5#ffffff7#ffffff2#ffffff1#ffffff,#ffffff1#ffffff4#ffffff.#ffffff7#ffffff7#ffffff8#ffffff5#ffffff="" #ffffff1#ffffff1#ffffff.#ffffff0#ffffff4#ffffff3#ffffff5#ffffff,#ffffff1#ffffff5#ffffff.#ffffff5#ffffff8#ffffff8#ffffff8#ffffff="" #ffffff9#ffffff.#ffffff3#ffffff7#ffffff9#ffffff9#ffffff9#ffffff,#ffffff1#ffffff5#ffffff.#ffffff8#ffffff8#ffffff0#ffffff1#ffffff="" #ffffffc#ffffff7#ffffff.#ffffff7#ffffff1#ffffff6#ffffff5#ffffff,#ffffff1#ffffff6#ffffff.#ffffff1#ffffff7#ffffff1#ffffff4#ffffff="" #ffffff6#ffffff.#ffffff0#ffffff0#ffffff3#ffffff4#ffffff9#ffffff,#ffffff1#ffffff5#ffffff.#ffffff9#ffffff2#ffffff8#ffffff8#ffffff="" #ffffff4#ffffff.#ffffff4#ffffff8#ffffff6#ffffff3#ffffff1#ffffff,#ffffff1#ffffff5#ffffff.#ffffff1#ffffff8#ffffff7#ffffff="" #ffffffc#ffffff3#ffffff.#ffffff7#ffffff7#ffffff3#ffffff3#ffffff5#ffffff,#ffffff1#ffffff4#ffffff.#ffffff8#ffffff3#ffffff8#ffffff5#ffffff="" #ffffff3#ffffff.#ffffff1#ffffff2#ffffff0#ffffff8#ffffff2#ffffff,#ffffff1#ffffff4#ffffff.#ffffff3#ffffff8#ffffff8#ffffff1#ffffff="" #ffffff2#ffffff.#ffffff5#ffffff4#ffffff7#ffffff2#ffffff,#ffffff1#ffffff3#ffffff.#ffffff8#ffffff5#ffffff3#ffffff7#ffffff="" #ffffffl#ffffff1#ffffff.#ffffff7#ffffff0#ffffff7#ffffff1#ffffff1#ffffff,#ffffff1#ffffff4#ffffff.#ffffff6#ffffff9#ffffff3#ffffff8#ffffff="" #ffffffc#ffffff1#ffffff.#ffffff0#ffffff7#ffffff7#ffffff1#ffffff4#ffffff,#ffffff1#ffffff5#ffffff.#ffffff3#ffffff2#ffffff3#ffffff8#ffffff="" #ffffff3#ffffff.#ffffff5#ffffff5#ffffff2#ffffff7#ffffff1#ffffff3#ffffff6#ffffff8#ffffffe#ffffff-#ffffff1#ffffff5#ffffff,#ffffff1#ffffff4#ffffff.#ffffff8#ffffff7#ffffff7#ffffff6#ffffff="" #ffffff3#ffffff.#ffffff5#ffffff5#ffffff2#ffffff7#ffffff1#ffffff3#ffffff6#ffffff8#ffffffe#ffffff-#ffffff1#ffffff5#ffffff,#ffffff1#ffffff3#ffffff.#ffffff9#ffffff8#ffffff6#ffffff7#ffffff="" #ffffffl#ffffff3#ffffff.#ffffff5#ffffff5#ffffff2#ffffff7#ffffff1#ffffff3#ffffff6#ffffff8#ffffffe#ffffff-#ffffff1#ffffff5#ffffff,#ffffff9#ffffff.#ffffff9#ffffff9#ffffff9#ffffff9#ffffff8#ffffff="" #ffffffl#ffffff3#ffffff.#ffffff9#ffffff8#ffffff6#ffffff7#ffffff3#ffffff,#ffffff9#ffffff.#ffffff9#ffffff9#ffffff9#ffffff9#ffffff8#ffffff="" #ffffffc#ffffff4#ffffff.#ffffff8#ffffff7#ffffff7#ffffff6#ffffff3#ffffff,#ffffff9#ffffff.#ffffff9#ffffff9#ffffff9#ffffff9#ffffff8#ffffff="" #ffffff5#ffffff.#ffffff3#ffffff2#ffffff3#ffffff8#ffffff,#ffffff1#ffffff1#ffffff.#ffffff0#ffffff7#ffffff7#ffffff1#ffffff="" #ffffff4#ffffff.#ffffff6#ffffff9#ffffff3#ffffff8#ffffff3#ffffff,#ffffff1#ffffff1#ffffff.#ffffff7#ffffff0#ffffff7#ffffff1#ffffff="" #ffffffl#ffffff3#ffffff.#ffffff9#ffffff6#ffffff2#ffffff6#ffffff,#ffffff1#ffffff2#ffffff.#ffffff4#ffffff3#ffffff8#ffffff3#ffffff="" #ffffffc#ffffff4#ffffff.#ffffff3#ffffff8#ffffff0#ffffff0#ffffff6#ffffff,#ffffff1#ffffff2#ffffff.#ffffff8#ffffff1#ffffff8#ffffff1#ffffff="" #ffffff4#ffffff.#ffffff8#ffffff5#ffffff1#ffffff5#ffffff3#ffffff,#ffffff1#ffffff3#ffffff.#ffffff1#ffffff3#ffffff9#ffffff4#ffffff="" #ffffff5#ffffff.#ffffff3#ffffff6#ffffff4#ffffff7#ffffff5#ffffff,#ffffff1#ffffff3#ffffff.#ffffff3#ffffff9#ffffff0#ffffff3#ffffff="" #ffffffc#ffffff6#ffffff.#ffffff5#ffffff0#ffffff2#ffffff6#ffffff4#ffffff,#ffffff1#ffffff3#ffffff.#ffffff9#ffffff4#ffffff6#ffffff6#ffffff="" #ffffff7#ffffff.#ffffff7#ffffff8#ffffff7#ffffff3#ffffff9#ffffff,#ffffff1#ffffff4#ffffff.#ffffff1#ffffff2#ffffff8#ffffff5#ffffff="" #ffffff9#ffffff.#ffffff0#ffffff3#ffffff5#ffffff0#ffffff1#ffffff,#ffffff1#ffffff3#ffffff.#ffffff9#ffffff1#ffffff0#ffffff1#ffffff="" #ffffffc#ffffff1#ffffff0#ffffff.#ffffff2#ffffff8#ffffff2#ffffff6#ffffff,#ffffff1#ffffff3#ffffff.#ffffff6#ffffff9#ffffff1#ffffff6#ffffff="" #ffffff1#ffffff1#ffffff.#ffffff4#ffffff2#ffffff9#ffffff1#ffffff,#ffffff1#ffffff3#ffffff.#ffffff0#ffffff8#ffffff3#ffffff9#ffffff="" #ffffff1#ffffff2#ffffff.#ffffff3#ffffff1#ffffff0#ffffff2#ffffff,#ffffff1#ffffff2#ffffff.#ffffff1#ffffff7#ffffff4#ffffff="" #ffffffc#ffffff1#ffffff3#ffffff.#ffffff1#ffffff9#ffffff1#ffffff4#ffffff,#ffffff1#ffffff1#ffffff.#ffffff2#ffffff6#ffffff4#ffffff1#ffffff="" #ffffff1#ffffff3#ffffff.#ffffff7#ffffff6#ffffff2#ffffff,#ffffff1#ffffff0#ffffff.#ffffff0#ffffff9#ffffff8#ffffff8#ffffff="" #ffffff1#ffffff3#ffffff.#ffffff9#ffffff4#ffffff0#ffffff3#ffffff,#ffffff8#ffffff.#ffffff8#ffffff4#ffffff4#ffffff7#ffffff6#ffffff="" #ffffffc#ffffff1#ffffff4#ffffff.#ffffff0#ffffff1#ffffff8#ffffff1#ffffff,#ffffff8#ffffff.#ffffff2#ffffff9#ffffff7#ffffff9#ffffff8#ffffff="" #ffffff1#ffffff4#ffffff.#ffffff5#ffffff2#ffffff4#ffffff4#ffffff,#ffffff7#ffffff.#ffffff9#ffffff1#ffffff7#ffffff7#ffffff6#ffffff="" #ffffff1#ffffff5#ffffff.#ffffff0#ffffff7#ffffff1#ffffff1#ffffff,#ffffff7#ffffff.#ffffff9#ffffff9#ffffff5#ffffff5#ffffff2#ffffff="" #ffffffl#ffffff1#ffffff4#ffffff.#ffffff9#ffffff5#ffffff4#ffffff7#ffffff0#ffffff9#ffffff8#ffffff,#ffffff7#ffffff.#ffffff9#ffffff8#ffffff5#ffffff7#ffffff6#ffffff0#ffffff8#ffffff4#ffffff="" #ffffffz#ffffff="" #ffffffm#ffffff1#ffffff1#ffffff.#ffffff5#ffffff1#ffffff3#ffffff7#ffffff,#ffffff0#ffffff.#ffffff8#ffffff1#ffffff2#ffffff9#ffffff7#ffffff6#ffffff="" #ffffffc#ffffff1#ffffff2#ffffff.#ffffff2#ffffff2#ffffff7#ffffff9#ffffff,#ffffff1#ffffff.#ffffff1#ffffff6#ffffff2#ffffff1#ffffff5#ffffff="" #ffffff1#ffffff2#ffffff.#ffffff8#ffffff8#ffffff1#ffffff4#ffffff,#ffffff1#ffffff.#ffffff6#ffffff1#ffffff3#ffffff4#ffffff9#ffffff="" #ffffff1#ffffff3#ffffff.#ffffff4#ffffff5#ffffff5#ffffff8#ffffff,#ffffff2#ffffff.#ffffff1#ffffff4#ffffff9#ffffff0#ffffff5#ffffff="" #ffffffl#ffffff1#ffffff4#ffffff.#ffffff2#ffffff9#ffffff2#ffffff9#ffffff,#ffffff1#ffffff.#ffffff3#ffffff1#ffffff1#ffffff9#ffffff3#ffffff="" #ffffffc#ffffff1#ffffff4#ffffff.#ffffff9#ffffff2#ffffff2#ffffff9#ffffff,#ffffff0#ffffff.#ffffff6#ffffff8#ffffff1#ffffff9#ffffff6#ffffff1#ffffff="" #ffffff1#ffffff6#ffffff,#ffffff1#ffffff.#ffffff1#ffffff2#ffffff8#ffffff1#ffffff3#ffffff="" #ffffff1#ffffff6#ffffff,#ffffff2#ffffff.#ffffff0#ffffff1#ffffff9#ffffff0#ffffff4#ffffff="" #ffffffl#ffffff1#ffffff6#ffffff,#ffffff6#ffffff.#ffffff0#ffffff0#ffffff0#ffffff0#ffffff1#ffffff="" #ffffffl#ffffff1#ffffff2#ffffff.#ffffff0#ffffff1#ffffff9#ffffff,#ffffff6#ffffff.#ffffff0#ffffff0#ffffff0#ffffff0#ffffff1#ffffff="" #ffffffc#ffffff1#ffffff1#ffffff.#ffffff1#ffffff2#ffffff8#ffffff1#ffffff,#ffffff6#ffffff.#ffffff0#ffffff0#ffffff0#ffffff0#ffffff1#ffffff="" #ffffff1#ffffff0#ffffff.#ffffff6#ffffff8#ffffff1#ffffff9#ffffff,#ffffff4#ffffff.#ffffff9#ffffff2#ffffff2#ffffff8#ffffff7#ffffff="" #ffffff1#ffffff1#ffffff.#ffffff3#ffffff1#ffffff1#ffffff9#ffffff,#ffffff4#ffffff.#ffffff2#ffffff9#ffffff2#ffffff9#ffffff1#ffffff="" #ffffffl#ffffff1#ffffff2#ffffff.#ffffff0#ffffff4#ffffff0#ffffff4#ffffff,#ffffff3#ffffff.#ffffff5#ffffff6#ffffff4#ffffff4#ffffff1#ffffff="" #ffffffc#ffffff1#ffffff1#ffffff.#ffffff6#ffffff2#ffffff2#ffffff2#ffffff,#ffffff3#ffffff.#ffffff1#ffffff8#ffffff3#ffffff4#ffffff6#ffffff="" #ffffff1#ffffff1#ffffff.#ffffff1#ffffff4#ffffff9#ffffff7#ffffff,#ffffff2#ffffff.#ffffff8#ffffff6#ffffff1#ffffff2#ffffff5#ffffff="" #ffffff1#ffffff0#ffffff.#ffffff6#ffffff3#ffffff5#ffffff3#ffffff,#ffffff2#ffffff.#ffffff6#ffffff0#ffffff9#ffffff7#ffffff3#ffffff="" #ffffffc#ffffff9#ffffff.#ffffff4#ffffff9#ffffff7#ffffff3#ffffff6#ffffff,#ffffff2#ffffff.#ffffff0#ffffff5#ffffff3#ffffff4#ffffff2#ffffff="" #ffffff8#ffffff.#ffffff2#ffffff1#ffffff2#ffffff6#ffffff1#ffffff,#ffffff1#ffffff.#ffffff8#ffffff7#ffffff1#ffffff4#ffffff6#ffffff="" #ffffff6#ffffff.#ffffff9#ffffff6#ffffff4#ffffff9#ffffff9#ffffff,#ffffff2#ffffff.#ffffff0#ffffff8#ffffff9#ffffff9#ffffff4#ffffff="" #ffffffc#ffffff5#ffffff.#ffffff7#ffffff1#ffffff7#ffffff3#ffffff7#ffffff,#ffffff2#ffffff.#ffffff3#ffffff0#ffffff8#ffffff4#ffffff1#ffffff="" #ffffff4#ffffff.#ffffff5#ffffff7#ffffff0#ffffff8#ffffff9#ffffff,#ffffff2#ffffff.#ffffff9#ffffff1#ffffff6#ffffff1#ffffff1#ffffff="" #ffffff3#ffffff.#ffffff6#ffffff8#ffffff9#ffffff7#ffffff6#ffffff,#ffffff3#ffffff.#ffffff8#ffffff2#ffffff5#ffffff9#ffffff9#ffffff="" #ffffffc#ffffff2#ffffff.#ffffff8#ffffff0#ffffff8#ffffff6#ffffff2#ffffff,#ffffff4#ffffff.#ffffff7#ffffff3#ffffff5#ffffff8#ffffff6#ffffff="" #ffffff2#ffffff.#ffffff2#ffffff3#ffffff8#ffffff0#ffffff2#ffffff,#ffffff5#ffffff.#ffffff9#ffffff0#ffffff1#ffffff2#ffffff5#ffffff="" #ffffff2#ffffff.#ffffff0#ffffff5#ffffff9#ffffff6#ffffff9#ffffff,#ffffff7#ffffff.#ffffff1#ffffff5#ffffff5#ffffff2#ffffff4#ffffff="" #ffffffc#ffffff1#ffffff.#ffffff9#ffffff8#ffffff1#ffffff9#ffffff3#ffffff,#ffffff7#ffffff.#ffffff7#ffffff0#ffffff2#ffffff0#ffffff2#ffffff="" #ffffff1#ffffff.#ffffff4#ffffff7#ffffff5#ffffff6#ffffff4#ffffff,#ffffff8#ffffff.#ffffff0#ffffff8#ffffff2#ffffff2#ffffff4#ffffff="" #ffffff0#ffffff.#ffffff9#ffffff2#ffffff8#ffffff8#ffffff5#ffffff8#ffffff,#ffffff8#ffffff.#ffffff0#ffffff0#ffffff4#ffffff4#ffffff8#ffffff="" #ffffffc#ffffff0#ffffff.#ffffff3#ffffff8#ffffff2#ffffff0#ffffff7#ffffff5#ffffff,#ffffff7#ffffff.#ffffff9#ffffff2#ffffff6#ffffff7#ffffff2#ffffff="" #ffffff0#ffffff.#ffffff0#ffffff0#ffffff1#ffffff8#ffffff5#ffffff5#ffffff8#ffffff5#ffffff,#ffffff7#ffffff.#ffffff4#ffffff2#ffffff0#ffffff4#ffffff3#ffffff="" #ffffff0#ffffff.#ffffff0#ffffff7#ffffff9#ffffff6#ffffff1#ffffff4#ffffff6#ffffff,#ffffff6#ffffff.#ffffff8#ffffff7#ffffff3#ffffff6#ffffff4#ffffff="" #ffffffc#ffffff0#ffffff.#ffffff3#ffffff1#ffffff7#ffffff3#ffffff9#ffffff,#ffffff5#ffffff.#ffffff2#ffffff0#ffffff1#ffffff6#ffffff6#ffffff="" #ffffff1#ffffff.#ffffff0#ffffff7#ffffff8#ffffff1#ffffff8#ffffff,#ffffff3#ffffff.#ffffff6#ffffff4#ffffff7#ffffff8#ffffff2#ffffff="" #ffffff2#ffffff.#ffffff2#ffffff5#ffffff3#ffffff0#ffffff3#ffffff,#ffffff2#ffffff.#ffffff4#ffffff3#ffffff4#ffffff6#ffffff5#ffffff="" #ffffffc#ffffff3#ffffff.#ffffff4#ffffff2#ffffff7#ffffff8#ffffff8#ffffff,#ffffff1#ffffff.#ffffff2#ffffff2#ffffff1#ffffff4#ffffff8#ffffff="" #ffffff4#ffffff.#ffffff9#ffffff5#ffffff6#ffffff5#ffffff2#ffffff,#ffffff0#ffffff.#ffffff4#ffffff1#ffffff1#ffffff2#ffffff1#ffffff7#ffffff="" #ffffff6#ffffff.#ffffff6#ffffff2#ffffff0#ffffff0#ffffff1#ffffff,#ffffff0#ffffff.#ffffff1#ffffff1#ffffff9#ffffff9#ffffff1#ffffff6#ffffff="" #ffffffc#ffffff8#ffffff.#ffffff2#ffffff8#ffffff3#ffffff5#ffffff,#ffffff-#ffffff0#ffffff.#ffffff1#ffffff7#ffffff1#ffffff3#ffffff8#ffffff4#ffffff="" #ffffff9#ffffff.#ffffff9#ffffff9#ffffff6#ffffff5#ffffff1#ffffff,#ffffff0#ffffff.#ffffff0#ffffff7#ffffff1#ffffff2#ffffff1#ffffff7#ffffff8#ffffff="" #ffffff1#ffffff1#ffffff.#ffffff5#ffffff1#ffffff3#ffffff7#ffffff,#ffffff0#ffffff.#ffffff8#ffffff1#ffffff2#ffffff9#ffffff7#ffffff6#ffffff="" #ffffffz#ffffff"#ffffff=""&gt;#ffffff&lt;#ffffff #ffffffp#ffffffa#fffffft#ffffffh#ffffff=""&gt;#ffffff #ffffff&lt;#ffffff #ffffffg#ffffff=""&gt;#ffffff<!--#ffffff--><!--#ffffff--><!--#ffffffp#ffffffa#fffffft#ffffffh#ffffff--><!--#ffffffg#ffffff--><!--#ffffff--><!--#ffffffg#ffffff--><!--#ffffff--><!--#ffffffg#ffffff--></svg>
                 <span>Retry Payment</span>
            </button>
        </div>
    </div>
</div>



    <div id="loginModal" class="modal">
        <div class="modal-content">
            <span class="modal-close-button" onclick="closeModal('loginModal')">&times;</span>
            <h4>Login to Your Account</h4>
            <div class="auth-tabs">
                <button id="loginTabBtn" onclick="switchAuthTab('login')" class="auth-tab-button active">username & password</button>
                <button id="voucherTabBtn" onclick="switchAuthTab('voucher')" class="auth-tab-button inactive">Voucher code</button>
            </div>

            <div id="loginForm" class="login-form">
                <form method="post" action="http://192.168.100.2/login">
                <input type="text" name="username" placeholder="Username" class="form-input">
                <input type="password" name="password" placeholder="Password" class="form-input">
                <input type="hidden" name="dst" value="$(link-orig)">
                <button type="submit" class="subscribe-button">Login</button>
                </form>
            </div>

            <div id="voucherForm" class="voucher-form">
                <input type="text" placeholder="Enter voucher code" class="form-input">
                <button class="subscribe-button">Redeem Voucher</button>
            </div>
        </div>
    </div>

    <script>
        let activeTab = 'hotspot';


        let selectedPackage = {
            name: null,
            price: null,
            duration: null
        };

        function fetchPackages(type) {
            fetch('https://08f9-102-210-247-18.ngrok-free.app/packages/')
                .then(res => res.json())
                .then(data => {
                    console.log(data);
                    const container = document.getElementById('packages');
                    container.innerHTML = '';
                    data.filter(pkg => pkg.type === type).forEach(pkg => {
                        const div = document.createElement('div');
                        div.className = "package-item";
                        div.innerHTML = `
                            ${pkg.name} @
                            <span class="price">Ksh ${pkg.price}</span><br> 
                            <span class="duration">${pkg.duration}</span>
                        `;
                        div.onclick = () => showPaymentModal(pkg);
                        container.appendChild(div);
                    });
                });
        }


        function switchTab(type) {
            activeTab = type;
            const unlimitedTabBtn = document.getElementById('unlimitedTab');
            const bundlesTabBtn = document.getElementById('bundlesTab');

            if (type === 'hotspot') {
                unlimitedTabBtn.classList.add('active');
                unlimitedTabBtn.classList.remove('inactive');
                bundlesTabBtn.classList.remove('active');
                bundlesTabBtn.classList.add('inactive');
            } else {
                bundlesTabBtn.classList.add('active');
                bundlesTabBtn.classList.remove('inactive');
                unlimitedTabBtn.classList.remove('active');
                unlimitedTabBtn.classList.add('inactive');
            }
            fetchPackages(type);
        }




        function showPaymentModal(pkg) {
            selectedPackage.name = pkg.name;
            selectedPackage.price = parseInt(pkg.price, 10); // Store price as an integer
            selectedPackage.duration = pkg.duration;

            console.log("Selected Package:", selectedPackage); // You can check the stored data here

            //document.getElementById('packageTitle').textContent = `<div> Subscribe to ${pkg.name} <div/> <div> Ksh ${pkg.price} for ${pkg.duration} </div>`;
            document.getElementById('packageTitle').innerHTML = `<div>Subscribe to ${pkg.name}</div> <div><strong>Ksh ${pkg.price}</strong> for ${pkg.duration}</div>`;
            document.getElementById('paymentModal').classList.add('show');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('show');
        }

        function showLoginModal() {
            document.getElementById('loginModal').classList.add('show');
        }

        function switchAuthTab(tab) {
            const loginForm = document.getElementById('loginForm');
            const voucherForm = document.getElementById('voucherForm');
            const loginTabBtn = document.getElementById('loginTabBtn');
            const voucherTabBtn = document.getElementById('voucherTabBtn');

            if (tab === 'login') {
                loginForm.style.display = 'flex'; // Show login form
                voucherForm.style.display = 'none'; // Hide voucher form
                loginTabBtn.classList.add('active');
                loginTabBtn.classList.remove('inactive');
                voucherTabBtn.classList.remove('active');
                voucherTabBtn.classList.add('inactive');
            } else if (tab === 'voucher') {
                voucherForm.style.display = 'flex'; // Show voucher form
                loginForm.style.display = 'none'; // Hide login form
                voucherTabBtn.classList.add('active');
                voucherTabBtn.classList.remove('inactive');
                loginTabBtn.classList.remove('active');
                loginTabBtn.classList.add('inactive');
            }
        }

        // Payment Handling
        async function subscribe() {
            const rawPhone = document.getElementById('phoneInput').value.trim();
            lastPhone = rawPhone;

            if (!/^0\d{9}$/.test(rawPhone)) {
                alert("Enter a valid Safaricom phone number starting with 0 and 10 digits long.");
                return;
            }

            const formattedPhone = "254" + rawPhone.slice(1);
            const subscribeButton = document.getElementById('subscribeBtn');
            const spinner = document.getElementById('spinner');
            const subscribeText = document.getElementById('subscribeText');

            // Disable the button and show the spinner
            subscribeButton.disabled = true;
            spinner.classList.remove('hidden');
            subscribeText.textContent = '';

            try {
                const response = await fetch("https://08f9-102-210-247-18.ngrok-free.app/stkpush", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ phone: formattedPhone, amount: selectedPackage.price  })
                });

                if (response.ok) {
                    closeModal('paymentModal');
                    document.getElementById('confirmationModal').classList.add('show');
                } else {
                    const error = await response.json();
                    alert(error.message || 'Subscription failed');
                }
            } catch (error) {
                alert("Payment Error: " + error.message);
                console.error('❌ Error:', error);
            } finally {
                // Re-enable the button and hide the spinner
                subscribeButton.disabled = false;
                spinner.classList.add('hidden');
                subscribeText.textContent = 'Subscribe Now';
            }
        }


        function retryPayment() {
            closeModal('confirmationModal');
            showPaymentModal(selectedPackage); // Use selectedPackage here
        }

        // Load default tab
        window.onload = () => switchTab('hotspot');
    </script>
</body>
</html>